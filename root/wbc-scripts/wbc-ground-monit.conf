set daemon 1

set httpd port 2812
	allow 0.0.0.0/0.0.0.0
 
check process wbc-hellovideo with pidfile /var/run/wbc/wbc-hellovideo.pid
 start program = "/root/wbc-scripts/pid-start.sh /var/run/wbc/wbc-hellovideo.pid '/opt/vc/src/hello_pi/hello_video/hello_video.240-udp /var/run/wbc/config.ini'" with timeout 3 seconds
 stop program = "/bin/kill $(cat /var/run/wbc/wbc-hellovideo.pid)"
 group wbc 
 
check process wbc-rssirx with pidfile /var/run/wbc/wbc-rssirx.pid
 start program = "/root/wbc-scripts/pid-start.sh /var/run/wbc/wbc-rssirx.pid '/root/wifibroadcast/rssi_forward_in /var/run/wbc/config.ini'" with timeout 3 seconds
 stop program = "/bin/kill $(cat /var/run/wbc/wbc-rssirx.pid)"
 group wbc 

check process wbc-osd with pidfile /var/run/wbc/wbc-osd.pid
 start program = "/root/wbc-scripts/pid-start.sh /var/run/wbc/wbc-rssirx.pid '/root/wifibroadcast_osd/osd /boot/osdconfig.ini'" with timeout 3 seconds
 stop program = "/bin/kill $(cat /var/run/wbc/wbc-osd.pid)"
 group wbc 

check process wbc-checkalive with pidfile /var/run/wbc/wbc-checkalive.pid
 start program = "/root/wbc-scripts/pid-start.sh /var/run/wbc/wbc-checkalive.pid '/root/wifibroadcast/check_alive_in /var/run/wbc/config.ini'" with timeout 3 seconds
 stop program = "/bin/kill $(cat /var/run/wbc/wbc-checkalive.pid)"
 group wbc 

check file wbc-configmon path /var/run/wbc/config.ini
 if changed sha1 checksum then exec "monit -g wbc restart all" 
 group wbc-mon

check process wbc-configsync with pidfile /var/run/wbc/wbc-configsync.pid
 start program = "/root/wbc-scripts/wbc-sync.sh /var/run/wbc/wbc-configsync.pid" with timeout 3 seconds
 stop program = "/bin/kill $(cat /var/run/wbc/wbc-configsync.pid)"
 group wbc-mon



